<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dublin Hustle 3D</title>
<style>
body { margin:0; overflow:hidden; font-family:arial; background:black; }
#loading {
 position:fixed; inset:0; background:black; color:white;
 display:flex; align-items:center; justify-content:center;
 font-size:30px; z-index:10;
}
#healthBar {
 position:fixed; top:20px; left:20px;
 width:200px; height:20px; border:2px solid white;
}
#health {
 height:100%; width:100%; background:lime;
}
.controls{
 position:fixed; bottom:30px; left:50%;
 transform:translateX(-50%);
 display:flex; gap:20px;
}
button{
 width:70px; height:70px;
 font-size:25px; border-radius:50%;
 border:none; background:white;
}
</style>
</head>
<body>

<div id="loading">Loading Dublin Hustle...</div>
<div id="healthBar"><div id="health"></div></div>

<div class="controls">
 <button id="left">◀</button>
 <button id="up">▲</button>
 <button id="right">▶</button>
 <button id="sprint">⚡</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152/build/three.min.js"></script>
<script>

let scene, camera, renderer, player;
let move = {left:false,right:false,up:false,sprint:false};

init();
animate();

function init(){

 scene = new THREE.Scene();
 scene.background = new THREE.Color(0x87ceeb);
 scene.fog = new THREE.Fog(0x87ceeb, 50, 300);

 camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
 camera.position.set(0,8,15);

 renderer = new THREE.WebGLRenderer({antialias:true});
 renderer.setSize(innerWidth, innerHeight);
 renderer.shadowMap.enabled = true;
 renderer.toneMapping = THREE.ACESFilmicToneMapping;
 document.body.appendChild(renderer.domElement);

 // SUNLIGHT
 const sun = new THREE.DirectionalLight(0xffffff, 1.3);
 sun.position.set(150,300,150);
 sun.castShadow = true;
 scene.add(sun);

 // GROUND (GRASS)
 const loader = new THREE.TextureLoader();
 const grass = loader.load("https://threejs.org/examples/textures/terrain/grasslight-big.jpg");
 grass.wrapS = grass.wrapT = THREE.RepeatWrapping;
 grass.repeat.set(100,100);

 const ground = new THREE.Mesh(
  new THREE.PlaneGeometry(2000,2000),
  new THREE.MeshStandardMaterial({map:grass})
 );
 ground.rotation.x = -Math.PI/2;
 ground.receiveShadow = true;
 scene.add(ground);

 // ROAD
 const roadTex = loader.load("https://threejs.org/examples/textures/terrain/grasslight-big.jpg");
 roadTex.repeat.set(20,2);
 const road = new THREE.Mesh(
  new THREE.PlaneGeometry(400,20),
  new THREE.MeshStandardMaterial({color:0x333333})
 );
 road.rotation.x = -Math.PI/2;
 road.position.z = 0;
 scene.add(road);

 // PLAYER
 player = new THREE.Mesh(
  new THREE.CapsuleGeometry(1,2,8,16),
  new THREE.MeshStandardMaterial({color:0xff4444})
 );
 player.position.y = 3;
 player.castShadow = true;
 scene.add(player);// ROAD
const road = new THREE.Mesh(
    new THREE.PlaneGeometry(60, 1000),
    new THREE.MeshStandardMaterial({color: 0x333333})
);
road.rotation.x = -Math.PI/2;
road.receiveShadow = true;
scene.add(road);
// BUILDINGS (Dublin street)

function createBuilding(x,z,height,color=0x888888){
 const b = new THREE.Mesh(
  new THREE.BoxGeometry(10,height,10),
  new THREE.MeshStandardMaterial({color})
 );
 b.position.set(x, height/2, z);
 b.castShadow = true;
 b.receiveShadow = true;
 scene.add(b);
}

// Left street
for(let i=0;i<20;i++){
 createBuilding(-30, -i*25, 20 + Math.random()*30);
}

// Right street
for(let i=0;i<20;i++){
 createBuilding(30, -i*25, 20 + Math.random()*30);
}

// Garda Station
createBuilding(-35, -120, 40, 0x2244aa);

// Court House
createBuilding(35, -220, 45, 0xaa8844);
 document.getElementById("loading").style.display="none";
}

function animate(){
 requestAnimationFrame(animate);

 let speed = move.sprint ? 0.6 : 0.3;

 if(move.left) player.position.x -= speed;
 if(move.right) player.position.x += speed;
 if(move.up) player.position.z -= speed;

 camera.position.lerp(
  new THREE.Vector3(player.position.x, player.position.y+8, player.position.z+15),
  0.1
 );
 camera.lookAt(player.position);

 renderer.render(scene,camera);
}

// TOUCH CONTROLS
left.ontouchstart=()=>move.left=true;
left.ontouchend=()=>move.left=false;

right.ontouchstart=()=>move.right=true;
right.ontouchend=()=>move.right=false;

up.ontouchstart=()=>move.up=true;
up.ontouchend=()=>move.up=false;

sprint.ontouchstart=()=>move.sprint=true;
sprint.ontouchend=()=>move.sprint=false;

</script>
</body>
</html>
