<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dublin Hustle 3D</title>

<style>
body{
  margin:0;
  overflow:hidden;
  font-family:Arial;
  background:black;
}

#loading{
  position:fixed;
  width:100%;
  height:100%;
  background:url('loading.png') center center no-repeat;
  background-size:cover;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
}

#startBtn{
  padding:20px 40px;
  font-size:24px;
  border:none;
  background:white;
  border-radius:10px;
}

#controls{
  position:fixed;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  display:grid;
  grid-template-columns:70px 70px 70px;
  gap:10px;
  z-index:5;
}

#controls button{
  height:70px;
  font-size:26px;
  border-radius:10px;
  border:none;
}

  
</style>
</head>

<body>

<div id="loading">
  <button id="startBtn">START GAME</button>
</div>

<div id="controls">
  <button id="left">⬅️</button>
  <button id="up">⬆️</button>
  <button id="right">➡️</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
const startBtn = document.getElementById("startBtn");
const loading = document.getElementById("loading");

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);
scene.fog = new THREE.Fog(0x87ceeb, 80, 400);

// SKY + FOG
scene.background = new THREE.Color(0x87ceeb);
scene.fog = new THREE.Fog(0x87ceeb, 80, 400);
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.physicallyCorrectLights = true;
renderer.outputEncoding = THREE.sRGBEncoding;
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.toneMappingExposure = 1.2;
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;


// SUNLIGHT + SHADOWS
const sun = new THREE.DirectionalLight(0xffffff, 1.3);
sun.position.set(150, 300, 150);
sun.castShadow = true;
scene.add(sun);

renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
const loader = new THREE.TextureLoader();

const roadTexture = loader.load("https://threejs.org/examples/textures/terrain/brick_diffuse.jpg");
roadTexture.wrapS = roadTexture.wrapT = THREE.RepeatWrapping;
roadTexture.repeat.set(60, 6);

const roadGeo = new THREE.PlaneGeometry(2000, 200);
const roadMat = new THREE.MeshStandardMaterial({ map: roadTexture });
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
const roadMat = new THREE.MeshStandardMaterial({ map: roadTexture });
road.receiveShadow = true;
road.rotation.x = -Math.PI / 2;
road.receiveShadow = true;
const playerMat = new THREE.MeshStandardMaterial({color:0x00ff00});
player.position.y = 2;
scene.add(player);

let move = {left:false,right:false,up:false};

document.getElementById("left").ontouchstart=()=>move.left=true;
document.getElementById("left").ontouchend=()=>move.left=false;

document.getElementById("right").ontouchstart=()=>move.right=true;
document.getElementById("right").ontouchend=()=>move.right=false;

document.getElementById("up").ontouchstart=()=>move.up=true;
document.getElementById("up").ontouchend=()=>move.up=false;

function updatePlayer(){
  if(move.left) player.position.x -= 0.2;
  if(move.right) player.position.x += 0.2;
  if(move.up) player.position.z -= 0.2;
}

function updateCamera(){
  camera.position.x = player.position.x;
  camera.position.z = player.position.z + 20;
  camera.position.y = player.position.y + 15;
  camera.lookAt(player.position);
}

function animate(){
  requestAnimationFrame(animate);
  updatePlayer();
  updateCamera();
  renderer.render(scene,camera);
}

startBtn.onclick = ()=>{
  loading.style.display="none";
  renderer.domElement.style.display="block";
  animate();
};
</script>

</body>
</html>
