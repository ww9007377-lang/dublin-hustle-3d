<!DOCTYPE html>
<html>
<head>
<title>Dublin Hustle 3D</title>
<style>
body{margin:0;overflow:hidden;font-family:Arial}
#loading{position:absolute;width:100%;height:100%;background:black;display:flex;align-items:center;justify-content:center}
#startBtn{padding:15px 30px;font-size:20px}
canvas{display:none}
</style>
</head>
<body>

<div id="loading">
<button id="startBtn">START GAME</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
const startBtn=document.getElementById("startBtn");
const loading=document.getElementById("loading");

const scene=new THREE.Scene();
scene.background=new THREE.Color(0xa0a0a0);

const camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);
renderer.domElement.style.display="none";

const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);

const road=new THREE.Mesh(
new THREE.PlaneGeometry(400,40),
new THREE.MeshLambertMaterial({color:0x333333})
);
road.rotation.x=-Math.PI/2;
scene.add(road);

const player=new THREE.Mesh(
new THREE.BoxGeometry(2,4,2),
new THREE.MeshLambertMaterial({color:0x00ff00})
);
player.position.y=2;
scene.add(player);

const car=new THREE.Mesh(
new THREE.BoxGeometry(6,2,3),
new THREE.MeshLambertMaterial({color:0xff0000})
);
car.position.set(10,1,0);
scene.add(car);

let inCar=false;
let touchX=null,touchY=null;

window.addEventListener("touchstart",e=>{
touchX=e.touches[0].clientX;
touchY=e.touches[0].clientY;

let dist=player.position.distanceTo(car.position);
if(dist<5){inCar=true;}
});

window.addEventListener("touchmove",e=>{
if(touchX===null)return;
let dx=e.touches[0].clientX-touchX;
let dy=e.touches[0].clientY-touchY;

if(inCar){
car.position.x+=dx*0.02;
car.position.z+=dy*0.02;
player.position.copy(car.position);
player.position.y=2;
}else{
player.position.x+=dx*0.01;
player.position.z+=dy*0.01;
}

touchX=e.touches[0].clientX;
touchY=e.touches[0].clientY;
});

function updateCamera(){
let target=inCar?car:player;
camera.position.x=target.position.x;
camera.position.z=target.position.z+20;
camera.position.y=target.position.y+15;
camera.lookAt(target.position);
}

function animate(){
requestAnimationFrame(animate);
updateCamera();
renderer.render(scene,camera);
}

startBtn.addEventListener("click",()=>{
loading.style.display="none";
renderer.domElement.style.display="block";
animate();
});
</script>
</body>
</html>
